
# Book My Table API

## Описание
Это API для системы бронирования столов, которое предоставляет функционал для создания, просмотра и управления бронированиями. Проект реализован на `Django` с использованием `Django REST Framework` и `Docker` для контейнеризации. База данных: `PostgreSQL`, тесты: `pytest`

## Функционал
- **Бронирование столов:** пользователи могут создать бронь, указав стол, имя клиента, время и длительность. Так же можно добавить бронь на неопределенное количество времени.
- **Валидация запроса при бронировании:** если вы попытаетесь добавить бронь в промежуток, в котором уже висит бронь, вам выдаст ошибку `400 Bad Request`. Так же если вы постараетесь добавить бронь на стол, в котором висит бронь с *произвольным временем*.
- **Версионирование API:** для взаимодействия с системой используется API, версия которого зафиксирована в пути URL.

## Системные требования
- Python 3.x
- Docker (для контейнеризации)
- Docker Compose (для запуска всех сервисов в одном контейнере)

## Запуск проекта с использованием Docker

1. **Клонировать репозиторий:**
   ```bash
   git clone https://github.com/ClutchIm/BookMyTable.git
   cd book_my_table
   ```

2. **Запуск Docker контейнера:**
   Для запуска проекта с использованием Docker и Docker Compose, используйте команду:
   ```bash
   docker compose up -d --build
   ```
   Это создаст и запустит контейнеры для всех сервисов, включая приложение и базу данных.

3. **Запуск сервера:**
   После этого API будет доступно по адресу: `http://localhost:8000`.

## Запуск тестов

Тесты для проекта написаны с использованием `pytest`. Для их запуска выполните следующую команду:

```bash
docker exec -ti web pytest
```

Тесты будут автоматически выполнены, и вывод появится в консоли.

## Доступные эндпоинты для резервации

### 1. **POST /api/v1/reservations/**
   Создание нового бронирования.

   **Параметры:**
   ```json
   {
     "table_id": 1,
     "customer_name": "Тест",
     "reservation_time": "2025-01-08T12:30:00Z",
     "duration_minutes": 30
   }
   ```
   **Ответ:**
   ```json
   {
     "message": "Reservation created successful"
   }
   ```

   **Описание:** Этот эндпоинт создает новое бронирование для стола. В запросе нужно указать ID стола, имя клиента, время бронирования и длительность.

   **Примечание:** `duration_minutes` является не обязательным параметром, если его не указать бронь создаться на неограниченный срок.

### 2. **DELETE /api/v1/reservations/{id}/**
   Удаление информации о бронировании по ID.

   **Ответ:**
   ```json
   {
     "message": "Reservation deleted successful"
   }
   ```

### 3. **GET /api/v1/reservations/**
   Список всех бронирований.

   **Ответ:**
   ```json
   [
     {
       "id": 1,
       "table_id": 1,
       "customer_name": "Тест",
       "reservation_time": "2025-01-08T12:30:00Z",
       "duration_minutes": 30
     },
     {
       "id": 2,
       "table_id": 2,
       "customer_name": "Тест 2",
       "reservation_time": "2025-01-09T15:00:00Z",
       "duration_minutes": 60
     }
   ]
   ```

## Доступные эндпоинты для взаимодействия со столами

### 1. **POST /api/v1/tables/**
   Создание нового стола.

   **Параметры:**
   ```json
   {
     "name": "Table 1",
     "seats": 4,
     "location": "В центре зала"
   }
   ```
   **Ответ:**
   ```json
   {
     "message": "Table 1 created successful"
   }
   ```

   **Описание:** Этот эндпоинт создает новый стол. В запросе нужно указать название стола, количество мест и его расположение.

### 2. **DELETE /api/v1/tables/{id}/**
   Удаление стола по ID.

   **Ответ:**
   ```json
   {
     "message": "Table is deleted"
   }
   ```

### 3. **GET /api/v1/tables/**
   Список всех столов.

   **Ответ:**
   ```json
   [
     {
       "id": 1,
       "name": "Table 1",
       "seats": 4,
       "location": "В центре зала"
     },
     {
       "id": 2,
       "name": "Table 2",
       "seats": 6,
       "location": "VIP ложа"
     }
   ]
   ```

## Возможные ошибки и ответы

- **400 Bad Request:** Возникает, если данные не полные или некорректные.
  - Так же сюда могут быть отнесены ошибки, когда данный столик на указанное время уже забронирован или в нем висит бронь с произвольным временем.

## Контакты

Для вопросов и предложений обращайтесь по электронной почте: `litvin.ruslan.work@gmail.com`.
